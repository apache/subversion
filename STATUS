      * * * * * * * * * * * * * * * * * * * * * * * * * * * *
      *                                                     *
      *  THIS RELEASE STREAM IS OPEN TO BUG FIXES.          *
      *                                                     *
      * * * * * * * * * * * * * * * * * * * * * * * * * * * *

This file tracks the status of releases in the 1.7.x line.

See http://subversion.apache.org/docs/community-guide/releasing.html#release-stabilization
for details on how release lines and voting work, what kinds of bugs can
delay a release, etc.

Status of 1.7.0:

Candidate changes:
==================

 * r1146131 and followups
   Add svn_fs_verify() and implement rep-cache verification in FSFS using it.
   Branch:
     1.7.x-fs-verify
   Justification:
     Would be nice to extend verify already in 1.7.x.
   Notes:
     This does not include progress reporting, since that is nominated
     separately.
   Votes:
     +1: rhuijben
     +0: danielsh
     +0: gstein (progress would be nice)

 * fs-progress branch
   Notes:
     Depends on the r1146131 group (1.7.x-fs-verify).
   Branch:
     fs-progress
   Justification:
     Provide feedback during 'svnadmin verify'.
     Avoid an API change in 1.8.
   Notes:
     If this proposal passes, the docstrings @since would have to be fixed
     in a new commit.
   Votes:
     +0: danielsh

 * r1147540, r1147541
   Remove unused variables in build system.
   Justification:
     Backporting of future changes will be easier.
   Votes:
     +1: arfrever

 * r1148083, r1148094
   Preload libsvn_auth_gnome_keyring and libsvn_auth_kwallet in locally built
   executables.
   Justification:
     Version mismatch errors would occur during trying to use locally built
     executables when a different version of Subversion was installed
     in /usr/lib.
   Votes:
     +1: arfrever, philip

 * r1148992
   Print error messages about failures of dynamic loading of libraries when
   SVN_DEBUG_DSO is defined instead of never.
   Justification:
     Suboptimal r1148374 was already backported in r1148488.
   Votes:
     +1: arfrever
     -0: rhuijben (A library shouldn't just write things to stderr. This needs
                   proper error handling instead. And besides I doubt anyone is
                   going to use this define (No veto!))
     -0: philip (changed my mind, I don't think this is needed on the branch)
     -0: stsp (Arfrever, can you please explain precisely what use case you
               have for this code? Why do you need it in the release, or
               on trunk, for that matter?)

 * r1148043, r1151055
   Allow building with serf trunk on windows.
   Votes:
     +0: danielsh (r1151055 only)
     +1: pburba, rhuijben
     -0: gstein (the serf 2.x API will be incompatible with 1.7.x, so this
         will never be useful)

 * r1154165
   Make the cmdline argument parser ignore upgrade required errors to
   allow calling 'svn upgrade c:\iNVALID' on 'C:\Invalid' without an
   error.
   Justification:
     Usually svn allows case differences, but in this case it doesn't.
     (Triggerable in other scenarios)
     http://svn.haxx.se/users/archive-2011-08/0142.shtml
   Votes:
     +1: rhuijben, arfrever

 * r1154278, r1154379, r1154382
   Make 'svn ls' capable of listing Subversion 1.0-1.3 repositories using
   ra_serf.
   Justification:
     We promised not to break backwards compatibility and it is not nice
     that serf doesn't want to list the neon repository.
     (Check svn ls http://svn.webdav.org/repos/projects/neon/)
   Notes:
     r1154278 is a quick hack to detect old servers and to at least return
              some information.
     r1154379 is the real fix: fallback to a more compatible request.
     r1154382 makes sure the right result is used directly after falling
              back from svn_ra_serf__get_dir.
              (Most likely the problem is detected earlier than this function)
   Votes:
     +1: rhuijben

 * r1154717, r1154718
   Detect broken svndiff streams in serf (r1154717) and neon (r1154718), in
   non-bulk updates before we even do the md5 checksum in the update editor.
   Justification:
     Some sanity checking doesn't hurt. Improves error details and avoids
     storing invalid streams in the pristine store.
   Votes:
     +1: rhuijben

 * r1154733
   Correctly position buffer pointer when resuming an aborted transfer in serf.
   Justification:
     Invalid pointer operation that causes at least datastream corruption.
   Votes:
     +1: rhuijben

 * r1154908
   Fix spurious test failures in Ruby bindings.
   Justification:
     Spurious test failures are a huge distraction and time sink when
     signing releases.
   Votes:
     +1: stsp

 * r1154982, r1155124
   Stop returning APR_EGENERAL from serf for unexpected data.
   Justification:
     Clients like AnkhSVN can't see what kind of error this is so they can
     only show a dialog with an error which in some cases is even not clear
     to normal users.
   Notes:
     r1154982 improves the generic errors and r1155124 restores some
     specific 'svn lock' behavior that was broken by r1154982.
   Votes:
     +1: rhuijben

 * r1155044, r1155313, r1155334
   Make the ctypes-python bindings tests run properly, by clearing the pool
   in which the repository was opened so that the rep-cache DB doesn't stay
   open when the repo is deleted and recreated for each test.
   Justification:
     It's good to be able to test what we're releasing.
   Notes:
     I don't know whether this was failing on every platform; I suspect not.
   Votes:
     +1: julianfoad (r1155044 only)
     +1: danielsh

 * r1155131
   Cleanup the xml parser in serf in unexpected conditions.
   Justification:
     Without this patch the xml parser is only freed when http responses are
     read successfully.
   Notes:
     This patch requires r1148932 to be backported for a clean merge.
     Currently accept theirs on conflict produces the right result.
   Votes:
     +1: rhuijben

 * r1155160
   When serf restarts a web request, start parsing xml where we stopped in the
   previous request to avoid xml parse errors on the <?xml.
   Justification:
     Without this patch it is not possible to reliable checkout neon using
     serf. (svn co http://svn.webdav.org/repos/projects/neon/tags/0.29.6 wc).
     I (rhuijben) call that a regression.
   Votes:
     +1: rhuijben

 * r1156085, r1156098
   Resolve issue #3985, "Re: 1.7 corrupts WC when reverting add of changelist
   member", by fixing a query
   Justification:
     Breaking working copies by reverting is unexpected behavior.
   Notes:
     r1156085 adds an XFail testcase and r1156098 resolves this issue.
   Votes:
     +1: rhuijben, philip

Veto-blocked changes:
=====================

 * 1.7.x-neon-default branch
   Make neon the default http library.
   Justification:
     Serf's relative stability is inferior to that of the rest of
     Subversion, and for such a critical piece of our architecture,
     this is unacceptable.

     Subversion package producers have voiced a vote of no confidence,
     and plan to ship with Neon as the default:
     http://svn.haxx.se/dev/archive-2011-07/0751.shtml
     http://svn.haxx.se/dev/archive-2011-06/0796.shtml

     Bug reports of the crash variety continue to be reported:
     http://svn.haxx.se/dev/archive-2011-07/0735.shtml

     Serf floods the target server with orders of magniture more
     requests, resulting in undesirable server log bloat.

     Further, the promise of performance has not been realized:
     https://ctf.open.collab.net/sf/wiki/do/viewPage/projects.csvn/wiki/HTTPv2

     (As an aside, Serf's potential as a platform for future
     improvement remains unproven and doubtful.  For example, HTTPv2
     removes canonical resource URLs, which works against the caching
     proxy concept that seems to be the strongest argument in favor of
     Serf's approach.  But that's not strictly germane here.)

     rhuijben: Trivial problems like r1153138 and less trivial compatibility
     problems like r1154278 should have been fixed a long time ago if we don't
     want to delay releasing 1.7.0 on this kind of serf problems.

     markphip: I understand why *we* would want Serf as default, so we can
     make it better, but it goes against all of the other conservatism in
     this project to make this the default when we *know* it is less stable,
     potentially lacks some of the features and is generally considerably
     slower than Neon.

     Serf's use of chunked transfer encoding means that it isn't supported
     by some HTTP proxies.
   Votes:
     +1: philip, cmpilato, rhuijben, markphip
     -1: gstein (this backs away from previous discussions stating that
                 serf is the desired future layer; the issue tracker has
                 been free of 1.7.0 serf-related bugs for a while now)


Approved changes:
=================
